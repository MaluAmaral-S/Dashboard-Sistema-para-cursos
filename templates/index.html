<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <title>Dashboard</title>
</head>
<body>
    <section id="sidebar">
    <a href="#" class="brand">
        <div class="image-text">
            <span class="logo">
                <i class='bx bxs-school'></i>
            </span>
        </div>
    </a>
    <ul class="side-menu top">
        <li class="active" data-tab="painel">
            <a href="#">
                <i class='bx bxs-book'></i>
                <span class="text">Painel</span>
            </a>
        </li>
        <li data-tab="inscricao">
            <a href="#">
                <i class='bx bxs-edit-alt'></i>
                <span class="text">Inscrição</span>
            </a>
        </li>
        <li data-tab="alunos">
            <a href="#">
                <i class='bx bxs-bar-chart-alt-2'></i>
                <span class="text">Alunos</span>
            </a>
        </li>
        <li data-tab="turmas">
            <a href="#">
                <i class='bx bxs-message-dots'></i>
                <span class="text">Turmas</span>
            </a>
        </li>
        <li data-tab="horarios">
            <a href="#">
                <i class='bx bxs-user'></i>
                <span class="text">Horários</span>
            </a>
        </li>
        <li data-tab="grade">
            <a href="#">
                <i class='bx bxs-calendar'></i>
                <span class="text">Grade de Horários</span>
            </a>
        </li>
    </ul>
    <ul class="side-menu">
        <li>
            <a href="#">
                <i class='bx bxs-cog'></i>
                <span class="text">Configurações</span>
            </a>
        </li>
    </ul>
</section>
    <section id="content">
        <nav>
            
            <i class='bx bx-menu'></i>
            <a href="#" class="nav-link">Disciplinas</a>
            <input type="checkbox" id="switch-mode" hidden>
            <label for="switch-mode" class="switch-mode"></label>
        </nav>
        <main>
            <div id="painel-tab" class="tab-content active">
                <div class="head-title">
                    <div class="left">
                        <h1>Painel Geral</h1>
                        <ul class="breadcrumb">
                            <li><a href="#">Painel Geral</a></li>
                            <li><i class='bx bx-chevron-right'></i></li>
                            <li><a class="active" href="#">Início</a></li>
                        </ul>
                    </div>
                </div>
                
                <ul class="box-info">
                    <li>
                        <i class='bx bxs-group'></i>
                        <span class="text">
                            <h3 id="total-alunos">0</h3>
                            <p>Total de Alunos</p>
                        </span>
                    </li>
                    <li>
                        <i class='bx bxs-school'></i>
                        <span class="text">
                            <h3 id="total-turmas">0</h3>
                            <p>Total de Turmas</p>
                        </span>
                    </li>
                    <li>
                        <i class='bx bxs-book-content'></i>
                        <span class="text">
                            <h3 id="total-cursos">0</h3>
                            <p>Total de Cursos</p>
                        </span>
                    </li>
                </ul>
                
                <div class="table-data">
                    <div class="order">
                        <div class="head"><h3>Turmas Populares</h3></div>
                        <table>
                            <thead><tr><th>Turma</th><th>Alunos</th><th>Limite</th></tr></thead>
                            <tbody id="turmas-populares"></tbody>
                        </table>
                    </div>
                    <div class="simulados">
                        <div class="head"><h3>Cursos Populares</h3></div>
                        <table class="simulado-table">
                            <thead><tr><th>Curso</th><th>Total Alunos</th></tr></thead>
                            <tbody id="cursos-populares"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="inscricao-tab" class="tab-content">
                <div class="head-title">
                    <div class="left">
                        <h1>Inscrição de Aluno</h1>
                        <ul class="breadcrumb">
                            <li><a href="#">Inscrição</a></li>
                            <li><i class='bx bx-chevron-right'></i></li>
                            <li><a class="active" href="#">Novo Aluno</a></li>
                        </ul>
                    </div>
                </div>
                <div class="form-container">
                    <form id="inscricao-form">
                        <div class="form-grid">
                            <div class="form-group"><label for="nome">Nome Completo *</label><input type="text" id="nome" name="nome" required></div>
                            <div class="form-group"><label for="idade">Idade *</label><input type="number" id="idade" name="idade" required min="1" max="120"></div>
                            <div class="form-group"><label for="data_nascimento">Data de Nascimento *</label><input type="date" id="data_nascimento" name="data_nascimento"></div>
                            <div class="form-group"><label for="cpf">CPF *</label><input type="text" id="cpf" name="cpf" required placeholder="000.000.000-00"></div>
                            <div class="form-group"><label for="rg">RG *</label><input type="text" id="rg" name="rg" required></div>
                            <div class="form-group"><label for="telefone">Telefone *</label><input type="tel" id="telefone" name="telefone" required placeholder="(00) 00000-0000"></div>
                            <div class="form-group full-width"><label for="endereco">Endereço *</label><input type="text" id="endereco" name="endereco" required></div>
                            <div class="form-group"><label for="nome_mae">Nome da Mãe *</label><input type="text" id="nome_mae" name="nome_mae"></div>
                            <div class="form-group"><label for="nome_pai">Nome do Pai</label><input type="text" id="nome_pai" name="nome_pai"></div>
                            <div class="form-group"><label for="escola">Escola (se ainda estudar)</label><input type="text" id="escola" name="escola"></div>
                            <div class="form-group">
                                <label for="curso_select">Curso *</label>
                                <select id="curso_select" name="curso_id" required onchange="loadCiclosForEnrollment()">
                                    <option value="">Selecione um curso</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="ciclo_select_enrollment">Ciclo *</label>
                                <select id="ciclo_select_enrollment" name="ciclo_id" required onchange="loadTurmasForEnrollment()">
                                    <option value="">Selecione um ciclo</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="turma_select_enrollment">Turma *</label>
                                <select id="turma_select_enrollment" name="turma_id" required>
                                    <option value="">Selecione uma turma</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn-primary">Inscrever Aluno</button>
                            <button type="reset" class="btn-secondary">Limpar Formulário</button>
                        </div>
                    </form>
                </div>
            </div>
            
            <div id="alunos-tab" class="tab-content">
                <div class="head-title">
                    <div class="left"><h1>Gerenciar Alunos</h1></div>
                </div>
                <div class="filters">
                    <div class="filter-group"><label for="filtro-nome">Nome:</label><input type="text" id="filtro-nome" placeholder="Buscar por nome"></div>
                    <div class="filter-group"><label for="filtro-curso">Curso:</label><select id="filtro-curso"><option value="">Todos os cursos</option></select></div>
                    <div class="filter-group"><label for="filtro-turma">Turma:</label><select id="filtro-turma"><option value="">Todas as turmas</option></select></div>
                    <button onclick="filtrarAlunos()" class="btn-filter">Filtrar</button>
                </div>
                <div class="table-data">
                    <div class="order full-width">
                        <div class="head"><h3>Lista de Alunos</h3></div>
                        <table>
                            <thead><tr><th>Nome</th><th>CPF</th><th>Telefone</th><th>Curso</th><th>Turma</th><th>Data Inscrição</th><th>Ações</th></tr></thead>
                            <tbody id="lista-alunos"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="turmas-tab" class="tab-content">
                <div class="head-title">
                    <div class="left">
                        <h1>Cursos Disponíveis</h1>
                        <ul class="breadcrumb">
                            <li><a href="#">Turmas</a></li>
                            <li><i class='bx bx-chevron-right'></i></li>
                            <li><a class="active" href="#">Cursos</a></li>
                        </ul>
                    </div>
                </div>

                <div id="lista-cursos-turmas" class="box-cursos">
                    </div>

                <div id="turmas-do-curso-container">
                    </div>

                <div id="turma-details-modal" class="modal-backdrop hidden">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 id="modal-curso-nome">Detalhes do Curso</h3>
                            <button id="modal-details-close-btn" class="modal-close">&times;</button>
                        </div>
                        <div id="modal-body-content" class="modal-body-steps">
                            <div id="modal-ciclos-container">
                                <h4>1. Selecione o Ciclo</h4>
                                <div id="modal-lista-ciclos" class="lista-botoes-modal">
                                    </div>
                            </div>
                            <div id="modal-turmas-container" style="display: none;">
                                <h4>2. Selecione a Turma</h4>
                                <div id="modal-lista-turmas" class="lista-botoes-modal">
                                    </div>
                            </div>
                            <div id="modal-alunos-container" class="table-data" style="display: none; padding: 0; background: none;">
                                <div class="order full-width">
                                    <div class="head" style="margin-bottom: 12px;">
                                        <h4 style="margin: 0;">3. Alunos Inscritos</h4>
                                    </div>
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Nome Completo</th>
                                                <th>Idade</th>
                                                <th>CPF</th>
                                                <th>Telefone</th>
                                            </tr>
                                        </thead>
                                        <tbody id="modal-lista-alunos">
                                            </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="turmas-list">
                    </div>
            </div>

            <div id="horarios-tab" class="tab-content">
                <div class="head-title">
                    <div class="left">
                        <h1>Gerenciar Horários</h1>
                        <ul class="breadcrumb">
                            <li><a href="#">Horários</a></li>
                            <li><i class='bx bx-chevron-right'></i></li>
                            <li><a class="active" href="#">Configuração</a></li>
                        </ul>
                    </div>
                </div>

                <div class="management-section">
                    <h3>1. Gerenciar Cursos</h3>
                    <form id="curso-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="curso-nome">Nome do Curso</label>
                                <input type="text" id="curso-nome" name="nome_do_curso" required>
                            </div>
                            <div class="form-group">
                                <label>Ícone do Curso</label>
                                <div class="icon-selector-container">
                                    <div id="icone-preview" class="icon-preview">
                                        <i class='bx bx-question-mark'></i>
                                    </div>
                                    <button type="button" id="btn-selecionar-icone" class="btn-secondary">Selecionar Ícone</button>
                                    <input type="hidden" id="curso-icone" name="icone" required>
                                    <input type="hidden" id="curso-icone-cor" name="icone_cor_classe">
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">Criar Curso</button>
                    </form>
                    
                    <h4>Cursos Cadastrados</h4>
                    <div id="lista-cursos-botoes" class="box-cursos">
                        </div>
                </div>

                <div id="icone-modal" class="modal-backdrop hidden">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Selecione um Ícone</h3>
                            <button id="modal-close-btn" class="modal-close">&times;</button>
                        </div>
                        <div id="icone-grid" class="icone-grid-container">
                            </div>
                    </div>
                </div>

                <div id="color-modal" class="modal-backdrop hidden">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Selecione uma Cor</h3>
                            <button id="color-modal-close-btn" class="modal-close">&times;</button>
                        </div>
                        <div id="color-grid" class="icone-grid-container">
                            </div>
                    </div>
                </div>
                <div class="management-section">
                    <h3>2. Gerenciar Ciclos</h3>
                    <form id="ciclo-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="ciclo-curso-select">Selecione o Curso *</label>
                                <select id="ciclo-curso-select" name="curso_id" required>
                                    <option value="">-- Primeiro crie um curso --</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="ciclo-nome">Nome do Ciclo *</label>
                                <input type="text" id="ciclo-nome" name="nome_ciclo" required placeholder="Ex: Ciclo 1, Inverno 2025">
                            </div>
                             <div class="form-group">
                                <label for="ciclo-mes-inicio">Mês de Início *</label>
                                <input type="text" id="ciclo-mes-inicio" name="mes_inicio" required min="1" max="12">
                            </div>
                            <div class="form-group">
                                <label for="ciclo-ano-inicio">Ano de Início *</label>
                                <input type="number" id="ciclo-ano-inicio" name="ano_inicio" required min="2024">
                            </div>
                            <div class="form-group">
                                <label for="ciclo-duracao">Duração (Meses) *</label>
                                <input type="number" id="ciclo-duracao" name="duracao" required min="1">
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">Criar Ciclo</button>
                    </form>

                    <h4>Ciclos Cadastrados</h4>
                    <div id="lista-ciclos" class="lista-geral">
                        </div>
                </div>
                
                <div class="management-section">
                    <h3>3. Criar Turma</h3>
                    <form id="turma-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="turma-ciclo-select">Selecione o Ciclo *</label>
                                <select id="turma-ciclo-select" name="ciclo_id" required>
                                    <option value="">-- Primeiro crie um ciclo --</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="turma-nome">Nome da Turma *</label>
                                <input type="text" id="turma-nome" name="nome_turma" required placeholder="Ex: Turma A, Tarde">
                            </div>
                            <div class="form-group">
                                <label for="turma-limite">Limite de Alunos *</label>
                                <input type="number" id="turma-limite" name="limite_alunos" required min="1" value="20">
                            </div>
                            <div class="form-group">
                                <label for="turma-data-inicio">Data de Início *</label>
                                <input type="date" id="turma-data-inicio" name="data_inicio" required>
                            </div>
                            <div class="form-group">
                                <label for="turma-horario-inicio">Horário de Início *</label>
                                <input type="time" id="turma-horario-inicio" name="horario_inicio" required>
                            </div>
                            <div class="form-group">
                                <label for="turma-horario-fim">Horário de Fim *</label>
                                <input type="time" id="turma-horario-fim" name="horario_fim" required>
                            </div>
                            <div class="form-group full-width">
                                <label for="turma-dias">Dias da Semana *</label>
                                <input type="text" id="turma-dias" name="dias_semana" required placeholder="Ex: Seg, Ter, Qua">
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">Salvar Turma</button>
                    </form>
                </div>
            </div>

            <div id="grade-tab" class="tab-content">
                <div class="head-title">
                    <div class="left"><h1>Grade de Horários</h1></div>
                </div>
                <div class="table-data">
                    <div class="order full-width">
                        <div class="head"><h3>Grade Completa de Horários</h3></div>
                        <table>
                            <thead><tr><th>Curso</th><th>Ciclo</th><th>Turma</th><th>Horário</th><th>Dias</th><th>Alunos</th><th>Limite</th><th>Status</th></tr></thead>
                            <tbody id="grade-horarios"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </section>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>